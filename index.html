<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tienda de Perfumes Premium</title>
<style>
body { font-family:'Poppins', sans-serif; margin:0; background:#f5f5f5; color:#333; }
header { background:#6b5b95; color:#fff; padding:20px; text-align:center; }
header h1 { margin:0; }
section { padding:40px 20px; max-width:1200px; margin:0 auto; }
h2 { color:#563d7c; margin-bottom:20px; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:20px; }
.card { background:#fff; border-radius:12px; text-align:center; padding:15px; box-shadow:0 4px 10px rgba(0,0,0,0.05); transition:0.3s; }
.card:hover { box-shadow:0 6px 20px rgba(0,0,0,0.1); }
.card h3 { margin-top:10px; font-size:1em; color:#6b5b95; }
button { margin-top:5px; padding:5px 10px; border:none; border-radius:5px; background:#6b5b95; color:#fff; cursor:pointer; }
#cart { position:fixed; bottom:0; right:0; background:#6b5b95; color:#fff; padding:15px; border-radius:12px 0 0 0; max-width:300px; z-index:100; }
#cart ul { list-style:none; padding:0; max-height:300px; overflow-y:auto; }
#checkout { display:none; padding:20px; background:#fff; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); margin-top:20px; }
#checkout input, #checkout select { display:block; width:100%; margin-bottom:10px; padding:8px; border-radius:5px; border:1px solid #ccc; }
#search-bar { margin-bottom:20px; padding:10px; width:100%; max-width:400px; border-radius:5px; border:1px solid #ccc; }
</style>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function(){emailjs.init("user_4zsh227");})();

// Lista de perfumes con precios de sus carpetas (ejemplo, debes completar los 76)
let perfumes = [
  {name:"Sauvage", price:120, gender:"Hombre", category:"Amaderado"},
  {name:"212 VIP", price:150, gender:"Hombre", category:"Dulce"},
  {name:"Miss Dior", price:130, gender:"Mujer", category:"Floral"},
  {name:"Good Girl", price:140, gender:"Mujer", category:"Dulce"},
  {name:"God Of Fire", price:160, gender:"Unisex", category:"Oriental"},
  // Completar los 76 perfumes aquí
];

let filteredPerfumes = [...perfumes];
let cart = [];

function renderPerfumes(){
  const grid = document.getElementById('perfume-grid');
  grid.innerHTML = '';
  filteredPerfumes.forEach(p=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h3>${p.name}</h3>
    <p>${p.gender} - ${p.category}</p>
    <button onclick="addToCart('${p.name}',${p.price})">Agregar al carrito</button>`;
    grid.appendChild(div);
  });
}

function addToCart(name, price){
  cart.push({name, price});
  renderCart();
}

function renderCart(){
  const cartItems = document.getElementById('cart-items');
  cartItems.innerHTML='';
  let total = 0;
  cart.forEach((item,index)=>{
    total+=item.price;
    const li=document.createElement('li');
    li.textContent = `${item.name} - $${item.price}`;
    const remove=document.createElement('button');
    remove.textContent='X';
    remove.onclick=()=>{cart.splice(index,1); renderCart();};
    li.appendChild(remove);
    cartItems.appendChild(li);
  });
  document.getElementById('cart-total').textContent = total.toFixed(2);
}

function showCheckout(){
  document.getElementById('checkout').style.display='block';
}

function submitOrder(){
  const name=document.getElementById('customer-name').value;
  const phone=document.getElementById('customer-phone').value;
  const address=document.getElementById('customer-address').value;
  const payment=document.getElementById('payment-method').value;
  if(!name||!phone||!address||!payment){ alert('Por favor completa todos los campos'); return; }

  let message='Pedido:\n';
  cart.forEach(item=>{ message+=`${item.name} - $${item.price}\n`; });
  message+=`Total: $${cart.reduce((a,b)=>a+b.price,0).toFixed(2)}\nNombre: ${name}\nTel: ${phone}\nDirección: ${address}\nPago: ${payment}\nNúmero para transferencias: +57 3115180995`;

  emailjs.send("service_4zsh227","template_9pw5f7b",{message})
      .then(()=>{alert('Pedido enviado correctamente'); cart=[]; renderCart(); document.getElementById('checkout').reset();});
}

function searchPerfume(){
  const term=document.getElementById('search-bar').value.toLowerCase();
  filteredPerfumes = perfumes.filter(p=>{
    return p.name.toLowerCase().includes(term) || 
           p.gender.toLowerCase().includes(term) || 
           p.category.toLowerCase().includes(term);
  });
  renderPerfumes();
}
window.onload = renderPerfumes;
</script>
</head>
<body>

<header>
<h1>Tienda de Perfumes Premium</h1>
<input type="text" id="search-bar" placeholder="Buscar perfume, género o categoría..." oninput="searchPerfume()">
</header>

<section id="perfumes">
<h2>Perfumes</h2>
<div class="grid" id="perfume-grid">
<!-- Se llena automáticamente con JS -->
</div>
</section>

<div id="cart">
<h3>Carrito</h3>
<ul id="cart-items"></ul>
<p>Total: $<span id="cart-total">0</span></p>
<button onclick="showCheckout()">Finalizar Compra</button>
</div>

<div id="checkout">
<h3>Finalizar Compra</h3>
<input type="text" id="customer-name" placeholder="Nombre completo">
<input type="tel" id="customer-phone" placeholder="Teléfono">
<input type="text" id="customer-address" placeholder="Dirección">
<select id="payment-method">
<option value="">Selecciona método de pago</option>
<option value="Nequi">Nequi</option>
<option value="Tranfiya">Tranfiya</option>
<option value="Efectivo">Efectivo</option>
</select>
<p>Para Nequi/Tranfiya transfiere al número: +57 3115180995 y escribe tu nombre en el comentario.</p>
<p>Para efectivo, se coordina la entrega.</p>
<button onclick="submitOrder()">Enviar Pedido</button>
</div>

</body>
</html>
