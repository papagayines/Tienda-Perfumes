<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nova Parfumes - Detalle</title>
<style>
  body { font-family:'Poppins', sans-serif; background:#fdfcfb; color:#333; margin:0; padding:0; }
  header { background:#6b5b95; color:#fff; text-align:center; padding:20px; }
  header h1 { font-size:2em; }
  main { max-width:800px; margin:30px auto; padding:0 20px; }
  h2 { color:#563d7c; margin-bottom:15px; }
  p { margin-bottom:10px; line-height:1.5; }
  .notas { background:#f5f3f7; padding:15px; border-radius:12px; margin-bottom:15px; }
  .sizes button { margin-right:8px; padding:8px 12px; border:none; border-radius:8px; background:#563d7c; color:#fff; cursor:pointer; transition:0.3s; }
  .sizes button:hover { background:#6b5b95; }
  .add-cart { display:block; margin-top:15px; padding:10px 15px; background:#ff7f50; color:#fff; border:none; border-radius:12px; cursor:pointer; transition:0.3s; }
  .add-cart:hover { background:#ff6333; }
</style>
</head>
<body>

<header>
<h1>Nova Parfumes</h1>
</header>

<main>
  <h2 id="perfume-nombre">Nombre del Perfume</h2>
  <p id="perfume-descripcion">Descripción breve del perfume.</p>
  <div class="notas">
    <p><strong>Notas de salida:</strong> <span id="nota-salida"></span></p>
    <p><strong>Notas de corazón:</strong> <span id="nota-corazon"></span></p>
    <p><strong>Notas de fondo:</strong> <span id="nota-fondo"></span></p>
  </div>
  <div class="sizes" id="sizes-container">
    <!-- Botones de tamaños y precios -->
  </div>
  <button class="add-cart" id="add-cart-btn">Añadir al Carrito</button>
</main>

<script>
  // --- Lista completa de perfumes ---
  const perfumes = [
    {
      nombre:"Acqua Di Gio",
      categoria:"Hombre",
      descripcion:"Un perfume muy fresco, ideal para días calurosos o de actividad física intensa.",
      notas:{ salida:"Cítricos", corazon:"Jazmín y Neroli", fondo:"Madera y Almizcle" },
      precios:{ "30ml":33000, "50ml":45000, "110ml":90000 }
    },
    {
      nombre:"Miss Dior",
      categoria:"Mujer",
      descripcion:"Elegante y floral, perfecta para ocasiones especiales o románticas.",
      notas:{ salida:"Mandarina y Bergamota", corazon:"Rosa y Jazmín", fondo:"Madera y Pachuli" },
      precios:{ "30ml":33000, "50ml":45000, "110ml":90000 }
    },
    {
      nombre:"God Of Fire",
      categoria:"Unisex",
      descripcion:"Aromas intensos y especiados, ideal para noches especiales.",
      notas:{ salida:"Bergamota y Pimienta", corazon:"Cardamomo y Sándalo", fondo:"Ámbar y Vainilla" },
      precios:{ "30ml":33000, "50ml":45000, "110ml":90000 }
    }
    // ... Agregar todos los 76 perfumes
  ];

  // --- Obtener perfume de URL ---
  const params = new URLSearchParams(window.location.search);
  const nombreUrl = params.get('perfume'); // ejemplo: perfumes.html?perfume=Acqua%20Di%20Gio
  const perfumeSeleccionado = perfumes.find(p => p.nombre.toLowerCase() === (nombreUrl||"").toLowerCase());

  if(perfumeSeleccionado){
    document.getElementById('perfume-nombre').textContent = perfumeSeleccionado.nombre;
    document.getElementById('perfume-descripcion').textContent = perfumeSeleccionado.descripcion;
    document.getElementById('nota-salida').textContent = perfumeSeleccionado.notas.salida;
    document.getElementById('nota-corazon').textContent = perfumeSeleccionado.notas.corazon;
    document.getElementById('nota-fondo').textContent = perfumeSeleccionado.notas.fondo;

    const sizesContainer = document.getElementById('sizes-container');
    Object.keys(perfumeSeleccionado.precios).forEach(size=>{
      const btn = document.createElement("button");
      btn.textContent = `${size} - $${perfumeSeleccionado.precios[size]}`;
      btn.onclick = ()=>{ precioSeleccionado = perfumeSeleccionado.precios[size]; tamañoSeleccionado = size; };
      sizesContainer.appendChild(btn);
    });

  } else {
    document.querySelector('main').innerHTML = "<h2>Perfume no encontrado</h2><p>Verifica el enlace o vuelve al catálogo.</p>";
  }

  // --- Carrito ---
  let carrito = [];
  let precioSeleccionado = null;
  let tamañoSeleccionado = null;

  const addCartBtn = document.getElementById('add-cart-btn');
  addCartBtn.addEventListener("click", ()=>{
    if(!perfumeSeleccionado){ alert("No hay perfume seleccionado."); return; }
    if(!tamañoSeleccionado){ alert("Selecciona un tamaño."); return; }

    const itemIndex = carrito.findIndex(i=>i.nombre===perfumeSeleccionado.nombre && i.size===tamañoSeleccionado);
    if(itemIndex>-1){
      carrito[itemIndex].cantidad++;
    }else{
      carrito.push({nombre:perfumeSeleccionado.nombre, size:tamañoSeleccionado, precio:precioSeleccionado, cantidad:1});
    }
    alert(`Añadido al carrito: ${perfumeSeleccionado.nombre} (${tamañoSeleccionado})`);
    console.log(carrito); // Para depuración
  });
</script>

</body>
</html>
